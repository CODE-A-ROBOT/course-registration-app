<!-- Display labels, element IDs, and selected values in a list -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Übersichtsplan</title>
  <link rel="stylesheet" href="styles.css"> <!-- Link to external styles.css file -->
</head>
<body>
  
  <h2>Übersichtsplan</h2>
<ul id="selectedCoursesList"></ul>

<script>
  let groupsMap = [];

  async function fetchGroups() {
    try {
      const response1 = await fetch('groups.json');
      if (!response1.ok) {
        throw new Error(`Failed to fetch groups.json. Status: ${response1.status}`);
      }
      groupsMap = new Map((await response1.json()).map(item => [item.group, item.subjects]));
    }
    catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', displaySummary);

  async function displaySummary() {
    await fetchGroups();

    // Retrieve the selected courses from the URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const selectedCoursesJSON = urlParams.get('selectedCourses');
    console.log(selectedCoursesJSON);
    const selectedCourses = JSON.parse(decodeURIComponent(selectedCoursesJSON));

    // Display the selected courses in a list with three columns
    const selectedCoursesList = document.getElementById('selectedCoursesList');

    groupsMap.forEach((_, group) => {
      console.log('Group: ' + group);
      //selectedCoursesList.appendChild('<br/><div>${group}</div>');
      selectedCoursesList.appendChild(document.createElement('br'));

      const newDiv = document.createElement('div');
      //newDiv.textContent = group; // Set the text content of the div to the value of the group variable
      newDiv.innerHTML = `<h3><strong>${group}</strong></h3>`;

      // Append the new div element to the selectedCoursesList
      selectedCoursesList.appendChild(newDiv);

      // Optionally, add a line break after each div

        selectedCourses.forEach(courses => {
          courses.forEach(course => {

            if (course.group === group && course.quarter !='-') {

              const listItem = document.createElement('li');

              listItem.innerHTML = `
              <span class="column">${course.value}</span>
                <span class="column">${course.label}</span>
                <span class="column">${course.patern}</span>
                <span class="column">${course.quarter}</span>
              `;

              selectedCoursesList.appendChild(listItem);
            }
          });
        });
      });
    
  }



</script>
</body>
</html>